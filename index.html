<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Deteksi Ekspresi Wajah Lanjutan</title>

  <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <h1><i class="fas fa-smile-beam"></i> Deteksi Ekspresi Wajah  <i class="fas fa-smile-beam"></i> </h1>

  <div class="section-box mode-selection">
    <h2>Pilih Mode Deteksi</h2>
    <div class="button-row"> <button onclick="showSection('camera')"><i class="fas fa-video"></i> Deteksi Kamera</button>
      <button onclick="showSection('photo')"><i class="fas fa-image"></i> Upload Foto</button>
      <button onclick="showSection('about')"><i class="fas fa-info-circle"></i> Tentang Aplikasi</button>
    </div>
  </div>

  <div class="section-box" id="cameraSection" style="display: none;">
    <h2>üì∏ Deteksi dari Kamera</h2>
    <div class="video-wrapper">
      <video id="video" autoplay muted playsinline></video>
      <canvas id="canvas"></canvas>
    </div>

    <p>Ekspresi Terdeteksi: <span class="expression" id="expression">Menunggu...</span></p>

    <div class="controls">
      <button id="startButton"><i class="fas fa-play"></i> Mulai Kamera</button>
      <button id="stopButton" disabled><i class="fas fa-stop"></i> Hentikan Kamera</button>
      <button id="captureButton" disabled><i class="fas fa-camera"></i> Ambil Tangkapan</button>
    </div>

    <div class="status-container">
      <div class="status" id="status">Memuat model...</div>
      <div class="loading-spinner" id="spinner"></div>
    </div>
    
    <div class="settings-panel">
        <h3>Pengaturan Deteksi</h3>
        <label for="inputSizeRange">Ukuran Input Model: <span id="inputSizeValue">224</span></label>
        <input type="range" id="inputSizeRange" min="128" max="640" value="224" step="32">
        <label for="minConfidenceRange">Min. Kepercayaan Deteksi: <span id="minConfidenceValue">0.5</span></label>
        <input type="range" id="minConfidenceRange" min="0.1" max="0.9" value="0.5" step="0.1">
    </div>

    <div id="debug"></div>
  </div>

  <div class="section-box" id="photoSection" style="display: none;">
    <h2>üñºÔ∏è Deteksi dari Foto</h2>
    <input type="file" id="imageUpload" accept="image/*" />
    <div class="image-wrapper">
      <img id="uploadedImage" alt="Pratinjau" />
      <canvas id="imageCanvas"></canvas>
    </div>
    <p>Ekspresi Terdeteksi: <span class="expression" id="photoExpression">Menunggu...</span></p>
    <div class="status" id="photoStatus"></div>
  </div>

  <div class="section-box" id="aboutSection" style="display: none;">
    <h2><i class="fas fa-info-circle"></i> Tentang Aplikasi Ini</h2>
    <p>Aplikasi ini dirancang untuk mendeteksi ekspresi wajah secara real-time dari kamera atau dari gambar yang diunggah. Aplikasi ini dibangun menggunakan pustaka JavaScript Face-API.js, yang merupakan implementasi JavaScript dari beberapa model machine learning yang ringan untuk deteksi wajah, deteksi landmark wajah, dan pengenalan ekspresi wajah.</p>
    
    <h3>Bagaimana Cara Kerjanya?</h3>
    <p>Face-API.js menggunakan model-model deep learning yang telah dilatih pada kumpulan data besar untuk mengidentifikasi fitur-fitur penting pada wajah (seperti mata, hidung, mulut) dan kemudian menganalisis ekspresi yang mendominasi seperti senang, sedih, marah, terkejut, takut, jijik, atau netral.</p>

    <h3>Batasan dan Etika</h3>
    <p>Aplikasi ini hanyalah demonstrasi teknologi dan bukan alat diagnostik medis atau profesional. Akurasi deteksi dapat bervariasi tergantung pada kualitas gambar/video, pencahayaan, posisi wajah, dan faktor lainnya.</p>

    <h3>Sumber Daya</h3>
    <ul>
      <li><a href="https://github.com/justadudewhohacks/face-api.js/" target="_blank">Face-API.js GitHub</a></li>
      <li><a href="https://justadudewhohacks.github.io/face-api.js/docs/index.html" target="_blank">Face-API.js Documentation</a></li>
    </ul>

    <h3><i class="fas fa-code"></i> Tim Pengembang</h3>
    <div class="developer-grid">
    <div class="developer-card">
        <img src="image/foto_gabriella.jpg" alt="Foto Pengembang 1" class="developer-photo">
        <h5>Gabriella Millena Koba</h5>
        <h5>NIM: 230211060014</h5>
    </div>
    <div class="developer-card">
        <img src="image/foto_clarissa.jpg" alt="Foto Pengembang 2" class="developer-photo">
        <h5>Clarissa Sheryl N. Maramis</h5>
        <h5>NIM: 230211060024</h5>
    </div>
    <div class="developer-card">
        <img src="image/foto_jeannette.jpg" alt="Foto Pengembang 3" class="developer-photo">
        <h5>Jeannette Kesia Naomi Liow</h5>
        <h5>NIM: 230211060035</h5>
    </div>
</div>
    <h3>Lisensi</h3>
    <p>Kode sumber aplikasi ini dirilis di bawah lisensi MIT. Face-API.js memiliki lisensinya sendiri.</p>
  </div>

  <script src="script.js"></script>
</body>
</html>